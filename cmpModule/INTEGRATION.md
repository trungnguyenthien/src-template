# Library Integration Guide

Integration guide for **library** library into Consumer App (Kotlin Multiplatform).

## ğŸ“¦ Library Information

- **Group ID**: `io.github.kotlin`
- **Artifact ID**: `library`
- **Version**: `1.0.0`
- **Maven Coordinates**: `io.github.kotlin:library:1.0.0`

## ğŸš€ Prerequisites

- Kotlin Multiplatform Project (Android + iOS)
- Gradle 8.0+
- Xcode 15.0+ (for iOS)

## ğŸ“¥ Installation

### Step 1: Add Maven Repository

Add Maven repository to `settings.gradle.kts`:

```kotlin
dependencyResolutionManagement {
    repositories {
        google()
        mavenCentral()
        mavenLocal() // âœ… For local development
        // maven("https://your-maven-repo.com/releases") // âœ… Or your Maven remote repository
    }
}
```

### Step 2: Add Dependency

In your shared module's `build.gradle.kts`:

```kotlin
kotlin {
    sourceSets {
        commonMain.dependencies {
            implementation("io.github.kotlin:library:1.0.0")
        }
    }
}
```

### Step 3: iOS Frameworks Integration

This library requires the following iOS frameworks in your iOS project:

- **AFNetworking** (`~> 4.0`)

**You can integrate these frameworks using one of the following methods:**
- **CocoaPods**: Add corresponding pods to Podfile
- **Swift Package Manager**: Add corresponding package dependencies
- **Manual**: Download and link frameworks manually

**Important**: Ensure all frameworks above are properly integrated into your iOS project, otherwise the app will crash at runtime with "framework not found" or "undefined symbol" errors.

### Step 4: Sync Project

```bash
# Refresh dependencies
./gradlew --refresh-dependencies

# Build project
./gradlew build
```

## ğŸ”§ Platform-Specific Implementation

### iOS
- Library uses native iOS frameworks listed in Step 3
- Supports iOS 13.0+
- Ensure all framework dependencies are properly linked

## ğŸ› Troubleshooting

### iOS: "framework not found" or "Undefined symbol"

**Cause**: Missing iOS framework dependencies.

**Solution:**
1. Check Step 3 - ensure all required frameworks are integrated
2. If using CocoaPods:
   - Run `pod install`
   - Open `*.xcworkspace` (NOT .xcodeproj)
   - Clean build: Product â†’ Clean Build Folder
3. If using SPM:
   - File â†’ Add Package Dependencies
   - Add corresponding packages
   - Rebuild project
4. Restart Xcode and rebuild

### Android: "Unable to resolve host"

**Solution:**
1. Check INTERNET permission in AndroidManifest.xml
2. Restart emulator with Cold Boot
3. Verify emulator has internet connection
4. Test on real device

### Build Error: "commonizeCInterop failed"

**Solution:**
- Already handled in library with `kotlin.mpp.enableCInteropCommonization=false`
- If still encountering errors, try cleaning cache:
  ```bash
  ./gradlew clean
  ./gradlew --stop
  rm -rf .gradle build
  ```

## ğŸ”„ Updating Library

```bash
# Update version in build.gradle.kts
implementation("io.github.kotlin:library:NEW_VERSION")

# Sync dependencies
./gradlew --refresh-dependencies
```

## ğŸ“ Notes

- Library uses coroutines, ensure calling from coroutine scope
- All network operations are suspend functions
- iOS requires native frameworks integration (see Step 3)

## ğŸ’¡ Best Practices

1. **Error Handling**: Always wrap network calls in try-catch
2. **Timeouts**: Default timeout is 30 seconds
3. **Threading**: Network calls automatically run on IO dispatcher
4. **Memory**: Networking instances are lightweight, can be created multiple times

## ğŸ†˜ Support

If you encounter issues, check:
1. [Troubleshooting section](#-troubleshooting)
2. Build logs in Gradle/Xcode
3. Verify iOS framework dependencies are fully integrated

---

**Generated by integration.sh** - Sun Feb  1 21:48:18 +07 2026
